---
prev: 2并发
next: 4网络
---
* [返回主页](../home.md)
# 3JVM
## Java内存区域
![](../../picture/1/3Java内存区域.png)

## 对象内存布局
![](../../picture/1/3对象内存布局.png)

## 编译器
![](../../picture/1/3编译器.png)

## 对象访问定位的方式
![](../../picture/1/3对象访问定位的方式.png)

## 对象的创建过程
![](../../picture/1/3对象的创建过程.png)

## GC
### 内存分配与回收
+ 对象优先在 eden 区分配
	+ 大对象直接进入老年代
		+ 避免为大对象分配内存时由于分配担保机制带来的复制而降低效率
	+ 长期存活的对象将进入老年代
	+ 空间分配担保
		+ 只要老年代的连续空间大于新生代对象总大小或者历次晋升的平均大小，
		+ 就会进行 Minor GC，否则将进行 Full GC
### 判断对象是否死亡
![](../../picture/1/3判断对象是否死亡.png)
### 判断常量是废弃常量
> 当前没有任何对象引用该常量，说明是废弃的，可回收

### 判断类无用
```text
该类所有的实例都已经被回收
加载该类的 ClassLoader 已经被回收
该类对应的 java.lang.Class 对象没有在任何地方被引用
```

### 引用的分类
#### 强引用
必不可少，当内存空间不足，Java 虚拟机宁愿抛出 OutOfMemoryError 错误
#### 软引用
如果内存空间足够，垃圾回收器就不会回收它，如果内存空间不足了，就会回收这些对象的内存
#### 弱引用
在垃圾回收器线程扫描它所管辖的内存区域的过程中，一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存
#### 虚引用
任何时候都可能回收，虚引用主要用来跟踪对象被垃圾回收的活动

### full gc
```text
老年代写满
system.gc
持久代空间不足
```

### 收集算法&收集器
![](../../picture/1/3GC.png)

## 问题排查
![](../../picture/1/3问题排查.png)

## 性能调优
![](../../picture/1/3性能调优.png)


* [返回主页](../home.md)