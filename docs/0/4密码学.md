---
prev: 3认证授权
next: 5markdown语法
---
* [返回主页](../home.md)
# 密码学
## 大纲
+ 定义
+ 术语
+ 分类
## 详情
![](../../picture/0/4密码学.png)

## Base64详解
+ Base64是一种用64个字符来表示任意二进制数据的方法,属于最常见的二进制编码方法
::: tip 作用
用记事本打开exe、jpg、pdf这些文件时，我们都会看到一大堆乱码，
因为二进制文件包含很多无法显示和打印的字符，
所以，如果要让记事本这样的文本处理软件能处理二进制数据，就需要一个二进制到字符串的转换方法。
:::

![](../../picture/0/4base64.png)

::: tip 原理
Base64的原理很简单，首先，准备一个包含64个字符的数组：<br>
['A', 'B', 'C', ... 'a', 'b', 'c', ... '0', '1', ... '+', '/'] <br>
然后，对二进制数据进行处理，每3个字节一组，一共是3x8=24bit，划为4组，每组正好6个bit：<br>
这样我们得到4个数字作为索引，然后查表，获得相应的4个字符，就是编码后的字符串。
:::

::: tip 结论
所以，Base64编码会把3字节的二进制数据编码为4字节的文本数据，长度增加33%，好处是编码后的文本数据可以在邮件正文、网页等直接显示。<br>
如果要编码的二进制数据不是3的倍数，最后会剩下1个或2个字节怎么办？<br>
Base64用\x00字节在末尾补足后，再在编码的末尾加上1个或2个=号，表示补了多少字节，解码的时候，会自动去掉。
:::

## 金融系统数据保护实践
### 传输安全
+ 前后端通讯通过http

### 信息保密性
+ 敏感信息加密AES（例如登录密码、身份证、手机号等PII字段）
::: tip 流程：
客户端生成AES key，然后从服务端获取RSA公钥，用RSA公钥对AES加密得到encodekey，用AES对敏感字段加密，然后将encodekey和敏感字段加密串一并传给服务端；
  
服务端用RSA私钥解密得到AES key，用AES key解密得到敏感字段数据。
:::  
### 数据完整性
+ sha1（客户端私钥，报文），生成摘要，服务端也才sha1方式生成签名对比，一致说明数据未被修改。
  
### 用户登录密码安全
+ 密码+渠道号用md5计算出一个摘要，再用sha对摘要计算出加密串保存到数据库（移动银行的实现）。
::: tip ps. 
通过渠道号增加安全性，比如作为摘要算法中的加盐，可使不同渠道/银行中用户用了相同密码，存入数据库中的摘要也是不同的，进一步加大撞库难度。
:::
  
### 金融交易密码安全
::: tip 方案一:
前端密码软键盘加密后传输，服务端解密（公钥解密获取私钥，进行解密），解密后通过加密平台API（可以封装成软解硬加接口）进行PIN转加密传输到互联网核心将PIN OFFSET存储数据库。
:::
::: tip 方案二:
前端密码软键盘集成加密平台的解决方案。<br>

流程：<br>
密码软键盘，加密平台，其他移动渠道使用统一的加密算法，密码软键盘获取工作密钥通过调用服务端，服务端工作密钥从加密平台同步来，再通过统一加密算法进行PIN加密，将加密好的密文传输到服务端，服务端通过调用加密平台API进行PIN转加密，传输核心系统，调用加密平台API进行PIN OFFSET存储数据库。<br>

说明：<br>
1、密码软键盘分为直销银行自有键盘和行方提供的安全键盘，自有键盘暂没有集成加密平台，需要升级。<br>
2、可以使用行方提供集成了加密平台的安全键盘。
:::















* [返回主页](../home.md)